<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>OSINT Search Tool</title>
  <style>
    /* --- Basic Reset & Fonts --- */
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #fff;
      color: #333;
      margin: 0; padding: 20px;
      max-width: 900px;
      margin-left: auto; margin-right: auto;
    }
    h1, h2, h3 {
      color: #B13F17;
      margin-top: 0;
    }
    h2 {
      margin-bottom: 20px;
    }
    a {
      color: #B13F17;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    button {
      cursor: pointer;
      background: #B13F17;
      border: none;
      color: white;
      padding: 8px 14px;
      border-radius: 4px;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    button:hover:not(:disabled) {
      background: #8e2d10;
    }
    button:disabled {
      background: #d18b75;
      cursor: not-allowed;
    }
    input[type=text], select {
      padding: 6px 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1em;
      margin-right: 8px;
      margin-bottom: 10px;
    }
    label {
      font-weight: 600;
      margin-right: 10px;
    }
    .container {
      margin-bottom: 30px;
    }
    .category-list, .manage-category-list, .saved-cases-list {
      max-height: 220px;
      overflow-y: auto;
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 6px;
      background: #fafafa;
    }
    .category-list label, .manage-category-list label {
      display: block;
      margin-bottom: 6px;
      cursor: pointer;
    }
    .result-item {
      border: 1px solid #e9ecef;
      background: #fafafa;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 25px;
    }
    .result-item strong {
      font-size: 1.1em;
    }
    .btn-small {
      font-size: 0.8em;
      padding: 4px 10px;
      border-radius: 4px;
      background: #B13F17;
      border: none;
      color: #fff;
      font-weight: 600;
    }
    .btn-small:hover {
      background: #8e2d10;
    }
    .btn-small.delete-case-btn {
      background: #dc3545;
    }
    .btn-small.delete-case-btn:hover {
      background: #b02a37;
    }
    .message {
      margin-bottom: 20px;
      padding: 12px 15px;
      border-radius: 6px;
      font-weight: 600;
      font-size: 1em;
    }
    .message.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    .message.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    .filters-group > div {
      margin-bottom: 12px;
    }
    .filters-group label {
      min-width: 150px;
      display: inline-block;
    }
    .header-info {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
    }
    .timestamp {
      color: #6c757d;
      font-size: 0.9em;
      margin-top: 10px;
    }
    /* Scrollbar for overflow lists */
    .category-list::-webkit-scrollbar,
    .manage-category-list::-webkit-scrollbar,
    .saved-cases-list::-webkit-scrollbar {
      width: 8px;
    }
    .category-list::-webkit-scrollbar-thumb,
    .manage-category-list::-webkit-scrollbar-thumb,
    .saved-cases-list::-webkit-scrollbar-thumb {
      background: #B13F17;
      border-radius: 6px;
    }
    /* Responsive */
    @media (max-width: 600px) {
      input[type=text], select, button {
        width: 100%;
        margin-bottom: 12px;
      }
      .filters-group label {
        display: block;
        margin-bottom: 4px;
      }
    }
  </style>
</head>
<body>
  <h1>üîç OSINT Search Tool</h1>

  <div class="container">
    <label for="keywordInput"><strong>Keyword Search:</strong></label><br />
    <input type="text" id="keywordInput" placeholder="Enter keyword(s) to search" />
    <button id="searchBtn">Search</button>
  </div>

  <div class="container filters-group">
    <h3>Advanced Filters</h3>
    <div>
      <label for="linkedinLocationInput">LinkedIn Location:</label>
      <input type="text" id="linkedinLocationInput" placeholder="e.g. London" />
    </div>
    <div>
      <label for="linkedinJobTitleInput">LinkedIn Job Title:</label>
      <input type="text" id="linkedinJobTitleInput" placeholder="e.g. Analyst" />
    </div>
    <div>
      <label for="linkedinCompanyInput">LinkedIn Company:</label>
      <input type="text" id="linkedinCompanyInput" placeholder="e.g. OpenAI" />
    </div>
    <div>
      <label for="linkedinSchoolInput">LinkedIn School:</label>
      <input type="text" id="linkedinSchoolInput" placeholder="e.g. Oxford" />
    </div>
    <div>
      <label for="facebookLocationInput">Facebook Location:</label>
      <input type="text" id="facebookLocationInput" placeholder="e.g. Manchester" />
    </div>
    <div>
      <label for="facebookEducationInput">Facebook Education:</label>
      <input type="text" id="facebookEducationInput" placeholder="e.g. University" />
    </div>
    <div>
      <label for="facebookWorkplaceInput">Facebook Workplace:</label>
      <input type="text" id="facebookWorkplaceInput" placeholder="e.g. Company name" />
    </div>
    <div>
      <label for="facebookRelationshipInput">Facebook Relationship:</label>
      <input type="text" id="facebookRelationshipInput" placeholder="e.g. Single" />
    </div>
  </div>

  <div class="container">
    <h3>Select Categories to Search</h3>
    <button id="selectAllBtn">Select All</button>
    <button id="deselectAllBtn">Deselect All</button>
    <div class="category-list" id="categoriesContainer"></div>
  </div>

  <div class="container">
    <h3>Manage Categories & Websites</h3>
    <div>
      <input type="text" id="newCategoryInput" placeholder="New Category Name" />
      <button id="addCategoryBtn">Add Category</button>
    </div>
    <div class="manage-category-list" id="manageCategoriesContainer"></div>
  </div>

  <div class="container">
    <h3>Add Website to Category</h3>
    <select id="categorySelectForWebsites"></select><br />
    <input type="text" id="newWebsiteName" placeholder="Website Name" />
    <input type="text" id="newWebsiteURL" placeholder="https://example.com/search?q=%s" />
    <button id="addWebsiteBtn">Add Website</button>
  </div>

  <div class="container">
    <h3>Search Results</h3>
    <div id="resultsContainer" style="min-height: 150px; font-style: italic; color: #666;">
      Enter keyword(s) and select categories to search.
    </div>
  </div>

  <div class="container">
    <button id="exportReportBtn">Export Report</button>
  </div>

  <div class="container">
    <h3>Saved Cases</h3>
    <input type="text" id="searchSavedCasesInput" placeholder="Filter saved cases..." />
    <button id="clearSavedCasesBtn" style="background:#dc3545;">Clear All Saved Cases</button>
    <div class="saved-cases-list" id="savedCasesContainer"></div>
  </div>

  <div id="messageContainer"></div>

  <script>
    // --- Constants ---
    const SAVED_CASES_KEY = "osint_saved_cases";

    // --- Elements ---
    const keywordInput = document.getElementById("keywordInput");
    const searchBtn = document.getElementById("searchBtn");
    const resultsContainer = document.getElementById("resultsContainer");
    const categoriesContainer = document.getElementById("categoriesContainer");
    const manageCategoriesContainer = document.getElementById("manageCategoriesContainer");
    const categorySelectForWebsites = document.getElementById("categorySelectForWebsites");
    const newCategoryInput = document.getElementById("newCategoryInput");
    const addCategoryBtn = document.getElementById("addCategoryBtn");
    const newWebsiteName = document.getElementById("newWebsiteName");
    const newWebsiteURL = document.getElementById("newWebsiteURL");
    const addWebsiteBtn = document.getElementById("addWebsiteBtn");
    const exportReportBtn = document.getElementById("exportReportBtn");
    const savedCasesContainer = document.getElementById("savedCasesContainer");
    const searchSavedCasesInput = document.getElementById("searchSavedCasesInput");
    const clearSavedCasesBtn = document.getElementById("clearSavedCasesBtn");

    // Advanced filters inputs
    const linkedinLocationInput = document.getElementById("linkedinLocationInput");
    const linkedinJobTitleInput = document.getElementById("linkedinJobTitleInput");
    const linkedinCompanyInput = document.getElementById("linkedinCompanyInput");
    const linkedinSchoolInput = document.getElementById("linkedinSchoolInput");
    const facebookLocationInput = document.getElementById("facebookLocationInput");
    const facebookEducationInput = document.getElementById("facebookEducationInput");
    const facebookWorkplaceInput = document.getElementById("facebookWorkplaceInput");
    const facebookRelationshipInput = document.getElementById("facebookRelationshipInput");

    // --- Data ---
    let categories = {
      "Social Media": [
        { name: "LinkedIn", url: "https://www.linkedin.com/search/results/all/?keywords=%s" },
        { name: "Facebook", url: "https://www.facebook.com/search/top/?q=%s" }
      ],
      "News": [
        { name: "Google News", url: "https://news.google.com/search?q=%s" },
        { name: "Bing News", url: "https://www.bing.com/news/search?q=%s" }
      ],
      "General": [
        { name: "Google", url: "https://www.google.com/search?q=%s" },
        { name: "Bing", url: "https://www.bing.com/search?q=%s" }
      ]
    };

    let searchResults = []; // will store search results objects

    // --- Utility Functions ---
    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    function saveCategoriesToLocalStorage() {
      localStorage.setItem("osint_categories", JSON.stringify(categories));
    }

    function loadCategoriesFromLocalStorage() {
      const saved = localStorage.getItem("osint_categories");
      if (saved) {
        try {
          categories = JSON.parse(saved);
        } catch {
          categories = {};
        }
      }
    }

    function saveCasesToLocalStorage(cases) {
      localStorage.setItem(SAVED_CASES_KEY, JSON.stringify(cases));
    }

    function loadCasesFromLocalStorage() {
      const saved = localStorage.getItem(SAVED_CASES_KEY);
      if (saved) {
        try {
          return JSON.parse(saved);
        } catch {
          return [];
        }
      }
      return [];
    }

    // --- Rendering Functions ---
    function renderCategoriesList() {
      categoriesContainer.innerHTML = "";
      for (const category in categories) {
        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.id = "cat_" + category;
        checkbox.value = category;

        const label = document.createElement("label");
        label.htmlFor = checkbox.id;
        label.textContent = category;

        const wrapper = document.createElement("div");
        wrapper.appendChild(checkbox);
        wrapper.appendChild(label);

        categoriesContainer.appendChild(wrapper);
      }
    }

    function renderManageCategories() {
      manageCategoriesContainer.innerHTML = "";
      for (const category in categories) {
        const catDiv = document.createElement("div");
        catDiv.style.marginBottom = "15px";

        // Editable category name input
        const input = document.createElement("input");
        input.type = "text";
        input.value = category;
        input.style.fontWeight = "bold";
        input.style.marginRight = "10px";
        input.style.width = "160px";

        // Save button for rename
        const renameBtn = document.createElement("button");
        renameBtn.textContent = "Rename";
        renameBtn.style.marginRight = "10px";

        renameBtn.addEventListener("click", () => {
          const newName = input.value.trim();
          if (!newName) {
            alert("Category name cannot be empty");
            input.value = category;
            return;
          }
          if (newName !== category && categories[newName]) {
            alert("Category with that name already exists.");
            input.value = category;
            return;
          }
          // Rename category
          categories[newName] = categories[category];
          delete categories[category];
          saveCategoriesToLocalStorage();
          renderCategoriesList();
          renderManageCategories();
          renderCategorySelectForWebsites();
          showMessage(`Category renamed to "${newName}"`, "success");
        });

        // Delete category button
        const deleteBtn = document.createElement("button");
        deleteBtn.textContent = "Delete";
        deleteBtn.style.backgroundColor = "#dc3545";
        deleteBtn.style.color = "white";

        deleteBtn.addEventListener("click", () => {
          if (confirm(`Delete category "${category}" and all its websites?`)) {
            delete categories[category];
            saveCategoriesToLocalStorage();
            renderCategoriesList();
            renderManageCategories();
            renderCategorySelectForWebsites();
            showMessage(`Category "${category}" deleted`, "success");
          }
        });

        catDiv.appendChild(input);
        catDiv.appendChild(renameBtn);
        catDiv.appendChild(deleteBtn);

        // Websites list with delete option
        const ul = document.createElement("ul");
        ul.style.paddingLeft = "20px";
        if (categories[category].length === 0) {
          const liEmpty = document.createElement("li");
          liEmpty.textContent = "(No websites)";
          ul.appendChild(liEmpty);
        } else {
          categories[category].forEach((site, i) => {
            const li = document.createElement("li");
            li.textContent = `${site.name} (${site.url}) `;

            const delSiteBtn = document.createElement("button");
            delSiteBtn.textContent = "Remove";
            delSiteBtn.className = "btn-small";
            delSiteBtn.style.marginLeft = "10px";
            delSiteBtn.addEventListener("click", () => {
              if (confirm(`Remove website "${site.name}" from category "${category}"?`)) {
                categories[category].splice(i, 1);
                saveCategoriesToLocalStorage();
                renderManageCategories();
                renderCategoriesList();
                renderCategorySelectForWebsites();
                showMessage(`Website "${site.name}" removed from "${category}"`, "success");
              }
            });
            li.appendChild(delSiteBtn);
            ul.appendChild(li);
          });
        }
        catDiv.appendChild(ul);

        manageCategoriesContainer.appendChild(catDiv);
      }
    }

    function renderCategorySelectForWebsites() {
      categorySelectForWebsites.innerHTML = "";
      for (const cat in categories) {
        const option = document.createElement("option");
        option.value = cat;
        option.textContent = cat;
        categorySelectForWebsites.appendChild(option);
      }
    }

    function renderSavedCases(filter = "") {
      const cases = loadCasesFromLocalStorage();
      savedCasesContainer.innerHTML = "";
      if (cases.length === 0) {
        savedCasesContainer.textContent = "No saved cases.";
        return;
      }
      const filteredCases = cases.filter(c => c.keyword.toLowerCase().includes(filter.toLowerCase()));
      if (filteredCases.length === 0) {
        savedCasesContainer.textContent = "No saved cases matching filter.";
        return;
      }
      filteredCases.forEach((c, idx) => {
        const div = document.createElement("div");
        div.className = "result-item";
        div.innerHTML = `
          <strong>Keyword:</strong> ${escapeHtml(c.keyword)}<br />
          <strong>Categories:</strong> ${c.categories.map(escapeHtml).join(", ")}<br />
          <strong>Timestamp:</strong> ${new Date(c.timestamp).toLocaleString()}<br />
          <button class="btn-small load-case-btn" data-index="${idx}">Load Case</button>
          <button class="btn-small delete-case-btn" data-index="${idx}">Delete Case</button>
        `;
        savedCasesContainer.appendChild(div);
      });
      // Add event listeners
      savedCasesContainer.querySelectorAll(".load-case-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          const i = Number(btn.dataset.index);
          loadSavedCase(i);
        });
      });
      savedCasesContainer.querySelectorAll(".delete-case-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          const i = Number(btn.dataset.index);
          deleteSavedCase(i);
        });
      });
    }

    // --- Message UI ---
    function showMessage(msg, type = "success", duration = 4000) {
      const container = document.getElementById("messageContainer");
      container.innerHTML = `<div class="message ${type}">${escapeHtml(msg)}</div>`;
      if (duration > 0) {
        setTimeout(() => {
          container.innerHTML = "";
        }, duration);
      }
    }

    // --- Search Logic ---
    async function runSearch() {
      const keyword = keywordInput.value.trim();
      if (!keyword) {
        showMessage("Please enter keyword(s) to search.", "error");
        return;
      }
      // Gather selected categories
      const selectedCategories = Array.from(categoriesContainer.querySelectorAll("input[type=checkbox]:checked")).map(cb => cb.value);
      if (selectedCategories.length === 0) {
        showMessage("Please select at least one category to search.", "error");
        return;
      }

      resultsContainer.innerHTML = "Searching...";
      searchResults = [];

      // Prepare advanced filters object
      const filters = {
        linkedinLocation: linkedinLocationInput.value.trim().toLowerCase(),
        linkedinJobTitle: linkedinJobTitleInput.value.trim().toLowerCase(),
        linkedinCompany: linkedinCompanyInput.value.trim().toLowerCase(),
        linkedinSchool: linkedinSchoolInput.value.trim().toLowerCase(),
        facebookLocation: facebookLocationInput.value.trim().toLowerCase(),
        facebookEducation: facebookEducationInput.value.trim().toLowerCase(),
        facebookWorkplace: facebookWorkplaceInput.value.trim().toLowerCase(),
        facebookRelationship: facebookRelationshipInput.value.trim().toLowerCase(),
      };

      // Simulate search (replace with real fetches or API calls as needed)
      const promises = [];

      selectedCategories.forEach(category => {
        const sites = categories[category];
        sites.forEach(site => {
          // Compose the search URL for this site with keyword encoded
          let url = site.url.replace("%s", encodeURIComponent(keyword));
          promises.push(
            new Promise(resolve => {
              // For demo, simulate a delay and fake results
              setTimeout(() => {
                // Simulate results as an array of objects
                // Here we create fake results with a simple template
                const fakeResults = [];
                for (let i = 1; i <= 3; i++) {
                  // Fake title and snippet using keyword and site name
                  const title = `${keyword} result ${i} on ${site.name}`;
                  const snippet = `Snippet for ${keyword} from ${site.name}, possibly filtered by your criteria.`;
                  // Fake relevance score between 0-100
                  const score = Math.floor(Math.random() * 100);
                  fakeResults.push({
                    title, snippet, url, siteName: site.name, category,
                    score,
                    filtersMatched: evaluateFilters(site.name, filters),
                  });
                }
                resolve(fakeResults);
              }, 500 + Math.random() * 1000);
            })
          );
        });
      });

      try {
        const resultsArrays = await Promise.all(promises);
        searchResults = resultsArrays.flat();

        // Filter results based on filtersMatched (true = passed filters)
        searchResults = searchResults.filter(r => r.filtersMatched);

        // Sort results by score descending
        searchResults.sort((a, b) => b.score - a.score);

        if (searchResults.length === 0) {
          resultsContainer.innerHTML = "<em>No results found with the applied filters.</em>";
        } else {
          renderSearchResults();
        }

        // Save this case automatically
        saveSearchCase(keyword, selectedCategories);

      } catch (err) {
        resultsContainer.innerHTML = "<em>Error during search.</em>";
        console.error(err);
      }
    }

    // --- Filter evaluation (simplified demo) ---
    // Returns true if the fake filters for the given site pass user inputs
    function evaluateFilters(siteName, filters) {
      // Since this is a demo with fake results, we'll simulate filter checking by
      // returning false if filter inputs exist but siteName doesn't match expected platform
      const siteLower = siteName.toLowerCase();
      // LinkedIn filters only apply to LinkedIn site
      if (filters.linkedinLocation || filters.linkedinJobTitle || filters.linkedinCompany || filters.linkedinSchool) {
        if (!siteLower.includes("linkedin")) return false;
      }
      // Facebook filters only apply to Facebook site
      if (filters.facebookLocation || filters.facebookEducation || filters.facebookWorkplace || filters.facebookRelationship) {
        if (!siteLower.includes("facebook")) return false;
      }
      return true;
    }

    // --- Render search results ---
    function renderSearchResults() {
      resultsContainer.innerHTML = "";
      searchResults.forEach(r => {
        const div = document.createElement("div");
        div.className = "result-item";
        div.innerHTML = `
          <strong>${escapeHtml(r.title)}</strong><br />
          <em>Site: ${escapeHtml(r.siteName)} | Category: ${escapeHtml(r.category)} | Score: ${r.score}</em><br />
          <p>${escapeHtml(r.snippet)}</p>
          <a href="${r.url}" target="_blank" rel="noopener noreferrer">Open Search Page</a>
        `;
        resultsContainer.appendChild(div);
      });
    }

    // --- Save search case ---
    function saveSearchCase(keyword, categoriesSelected) {
      let cases = loadCasesFromLocalStorage();
      const timestamp = Date.now();
      // Avoid duplicates for same keyword + categories - but for demo, just add new
      cases.push({ keyword, categories: categoriesSelected, timestamp });
      saveCasesToLocalStorage(cases);
      renderSavedCases(searchSavedCasesInput.value.trim());
    }

    // --- Load saved case ---
    function loadSavedCase(index) {
      const cases = loadCasesFromLocalStorage();
      if (!cases[index]) return;
      const c = cases[index];
      keywordInput.value = c.keyword;
      // Set checkboxes for categories
      const allCheckboxes = categoriesContainer.querySelectorAll("input[type=checkbox]");
      allCheckboxes.forEach(cb => {
        cb.checked = c.categories.includes(cb.value);
      });
      showMessage(`Loaded saved case for "${c.keyword}"`, "success");
      runSearch();
    }

    // --- Delete saved case ---
    function deleteSavedCase(index) {
      let cases = loadCasesFromLocalStorage();
      if (!cases[index]) return;
      if (!confirm(`Delete saved case "${cases[index].keyword}"?`)) return;
      cases.splice(index, 1);
      saveCasesToLocalStorage(cases);
      renderSavedCases(searchSavedCasesInput.value.trim());
      showMessage("Saved case deleted", "success");
    }

    // --- Add new category ---
    addCategoryBtn.addEventListener("click", () => {
      const newCat = newCategoryInput.value.trim();
      if (!newCat) {
        alert("Please enter a category name.");
        return;
      }
      if (categories[newCat]) {
        alert("Category already exists.");
        return;
      }
      categories[newCat] = [];
      saveCategoriesToLocalStorage();
      renderCategoriesList();
      renderManageCategories();
      renderCategorySelectForWebsites();
      newCategoryInput.value = "";
      showMessage(`Category "${newCat}" added`, "success");
    });

    // --- Add new website ---
    addWebsiteBtn.addEventListener("click", () => {
      const cat = categorySelectForWebsites.value;
      const siteName = newWebsiteName.value.trim();
      let siteURL = newWebsiteURL.value.trim();

      if (!siteName || !siteURL) {
        alert("Please enter both website name and URL.");
        return;
      }
      if (!siteURL.includes("%s")) {
        alert('Website URL must include "%s" as placeholder for the keyword.');
        return;
      }
      // Add to category
      categories[cat].push({ name: siteName, url: siteURL });
      saveCategoriesToLocalStorage();
      renderManageCategories();
      renderCategoriesList();
      newWebsiteName.value = "";
      newWebsiteURL.value = "";
      showMessage(`Website "${siteName}" added to category "${cat}"`, "success");
    });

    // --- Select all / Deselect all categories ---
    document.getElementById("selectAllBtn").addEventListener("click", () => {
      categoriesContainer.querySelectorAll("input[type=checkbox]").forEach(cb => cb.checked = true);
    });
    document.getElementById("deselectAllBtn").addEventListener("click", () => {
      categoriesContainer.querySelectorAll("input[type=checkbox]").forEach(cb => cb.checked = false);
    });

    // --- Search button ---
    searchBtn.addEventListener("click", () => {
      runSearch();
    });

    // --- Export report ---
    exportReportBtn.addEventListener("click", () => {
      if (searchResults.length === 0) {
        alert("No search results to export.");
        return;
      }
      const keyword = keywordInput.value.trim();
      let report = `OSINT Search Report\nKeyword: ${keyword}\nDate: ${new Date().toLocaleString()}\n\nResults:\n\n`;
      searchResults.forEach((r, i) => {
        report += `${i + 1}. [${r.category}] ${r.title}\nSite: ${r.siteName}\nURL: ${r.url}\nScore: ${r.score}\nSnippet: ${r.snippet}\n\n`;
      });
      const blob = new Blob([report], { type: "text/plain" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = `osint_report_${Date.now()}.txt`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    });

    // --- Saved cases filter input ---
    searchSavedCasesInput.addEventListener("input", () => {
      renderSavedCases(searchSavedCasesInput.value.trim());
    });

    // --- Initial load ---
    loadCategoriesFromLocalStorage();
    renderCategoriesList();
    renderManageCategories();
    renderCategorySelectForWebsites();
    renderSavedCases();

  });
</script>

</body>
</html>
